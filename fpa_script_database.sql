-- MySQL Script generated by MySQL Workbench
-- ter 28 mar 2023 20:53:39
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

-- -----------------------------------------------------
-- Schema fpa_database
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema fpa_database
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS fpa_database DEFAULT CHARACTER SET utf8 ;
USE fpa_database ;

-- -----------------------------------------------------
-- Table `fpa_database`.`usuario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS usuario (
  idUsuario INT NOT NULL AUTO_INCREMENT,
  nome VARCHAR(45) NOT NULL,
  prontuario VARCHAR(45) NOT NULL UNIQUE,
  senha VARCHAR(45) NOT NULL,
  cpf VARCHAR(45) NOT NULL,
  cargo VARCHAR(1) DEFAULT 'p',
  tempoCampus INT,
  tempoExp INT,
  tempoProfissional INT,
  tempoInstituicao INT,
  nivelCarreira INT,
  idade INT,
  PRIMARY KEY (idUsuario))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

-- -----------------------------------------------------
-- Table `fpa_database`.`cursos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS cursos (
  idCurso INT NOT NULL,
  nomeCurso VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idCurso`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

-- -----------------------------------------------------
-- Table `fpa_database`.`horario`
-- -----------------------------------------------------
CREATE Table IF NOT EXISTS horario (
  idHorario INT NOT NULL,
  diaSemana VARCHAR(45) NOT NULL,
  horaInicio TIME NOT NULL,
  horaFim TIME NOT NULL,
  PRIMARY KEY(`idHorario`,`diaSemana`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

-- -----------------------------------------------------
-- Table `fpa_database`.`componentes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS componentes (
  idComponentes INT NOT NULL AUTO_INCREMENT,
  nomeMateria VARCHAR(45) NOT NULL,
  horario_idHorario INT NOT NULL,
  cursos_idCurso INT NOT NULL,
  periodo VARCHAR(15), -- M=Manhã, T=Tarde, N=Noturno
  horasSemanais INT,
  PRIMARY KEY (`idComponentes`),
  CONSTRAINT fk_componentes_horario
    FOREIGN KEY (horario_idHorario)
    REFERENCES fpa_database.horario (idHorario)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_componentes_cursos
    FOREIGN KEY (cursos_idCurso)
    REFERENCES fpa_database.cursos (idCurso)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

-- -----------------------------------------------------
-- Table `fpa_database`.`preferencia`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS preferencia (
  idPreferencia INT NOT NULL AUTO_INCREMENT,
  usuario_idUsuario INT NOT NULL,
  componentes_idComponentes INT NOT NULL,
  prioridade VARCHAR(45) NOT NULL,
  PRIMARY KEY (idPreferencia),
  CONSTRAINT fk_preferencia_usuario
    FOREIGN KEY (usuario_idUsuario)
    REFERENCES fpa_database.usuario (idUsuario)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_preferencia_componentes
    FOREIGN KEY (componentes_idComponentes)
    REFERENCES fpa_database.componentes (idComponentes)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `fpa_database`.`atribuido`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS atribuido (
  idAtribuido INT NOT NULL AUTO_INCREMENT,
  componentes_idComponentes INT NOT NULL,
  usuario_idUsuario INT NOT NULL,
  PRIMARY KEY (idAtribuido),
  CONSTRAINT fk_atribuido_componentes
    FOREIGN KEY (componentes_idComponentes)
    REFERENCES fpa_database.componentes (idComponentes)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_atribuido_usuario
    FOREIGN KEY (usuario_idUsuario)
    REFERENCES fpa_database.usuario (idUsuario)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

-- POPULANDO DATABASE --
-- USUARIO --
insert into usuario(nome, prontuario, senha, cpf, cargo) value('João','12345','12345','6789','c');
insert into usuario(nome, prontuario, senha, cpf, cargo) value('Andre','345678','12345','12345','p');
insert into usuario(nome, prontuario, senha, cpf, cargo) value('Moana','67890','67890','67890','p');

-- CURSOS --
insert into cursos(idCurso, nomeCurso) value(001,'TI - Técnico Informática');
insert into cursos(idCurso, nomeCurso) value(002,'TSI - Tecnologia para Sistema da Internet');
insert into cursos(idCurso, nomeCurso) value(003,'TM - Técnico Mecatronica');

-- HORARIO --
insert into horario(idHorario, diaSemana, horaInicio, horaFim) value(01,'quarta', '19:00', '22:35');
insert into horario(idHorario, diaSemana, horaInicio, horaFim) value(02,'terça e sexta', '19:00', '22:35');
insert into horario(idHorario, diaSemana, horaInicio, horaFim) value(03,'terça', '12:35', '14:15');

-- COMPONENTES --
insert into componentes(nomeMateria, horario_idHorario, cursos_idCurso, periodo, horasSemanais) value('ISO - Introdução a Sistemas Operacionais', 01, 001, 'N', 4);
insert into componentes(nomeMateria, horario_idHorario, cursos_idCurso, periodo, horasSemanais) value('IPW - Introdução a Programção Web', 02, 002, 'T', 8);
insert into componentes(nomeMateria, horario_idHorario, cursos_idCurso, periodo, horasSemanais) value('DAC - Desenho Assistido por Computador', 03, 003, 'M', 4);

-- ATRIBUIDO -- 
insert into atribuido(componentes_idComponentes, usuario_idUsuario) value(1,1);
insert into atribuido(componentes_idComponentes, usuario_idUsuario) value(2,2);

