-- MySQL Script generated by MySQL Workbench
-- ter 28 mar 2023 20:53:39
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

-- -----------------------------------------------------
-- Schema fpa_database
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema fpa_database
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS fpa_database DEFAULT CHARACTER SET utf8 ;
USE fpa_database ;

-- -----------------------------------------------------
-- Table `fpa_database`.`usuario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS usuario (
  idUsuario INT NOT NULL AUTO_INCREMENT,
  nome VARCHAR(45) NOT NULL,
  prontuario VARCHAR(45) NOT NULL UNIQUE,
  senha VARCHAR(45) NOT NULL,
  cpf VARCHAR(45) NOT NULL,
  cargo VARCHAR(1) DEFAULT 'p',
  tempoCampus INT,
  tempoExp INT,
  tempoProfissional INT,
  tempoInstituicao INT,
  nivelCarreira INT,
  idade INT,
  PRIMARY KEY (idUsuario))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

-- -----------------------------------------------------
-- Table `fpa_database`.`cursos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS cursos (
  idCurso VARCHAR(10) NOT NULL,
  nomeCurso VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idCurso`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

-- -----------------------------------------------------
-- Table `fpa_database`.`componentes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS componentes (
  idComponentes VARCHAR(10) NOT NULL,
  nomeMateria VARCHAR(45) NOT NULL,
  cursos_idCurso VARCHAR(10) NOT NULL,
  periodo VARCHAR(15), -- M=Manhã, T=Tarde, N=Noturno
  horasSemanais INT,
  usuario_atribuidoPara INT,
  PRIMARY KEY (`idComponentes`),
  CONSTRAINT fk_componentes_cursos
    FOREIGN KEY (cursos_idCurso)
    REFERENCES fpa_database.cursos (idCurso)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_componentes_usuario
    FOREIGN KEY (usuario_atribuidoPara)
    REFERENCES fpa_database.usuario (idUsuario)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

-- -----------------------------------------------------
-- Table `fpa_database`.`horario`
-- -----------------------------------------------------
CREATE Table IF NOT EXISTS horario (
  componente_idComponentes VARCHAR(10) NOT NULL,
  idHorario INT NOT NULL AUTO_INCREMENT,
  diaSemana VARCHAR(45) NOT NULL,
  horaInicio TIME NOT NULL,
  horaFim TIME NOT NULL,
  PRIMARY KEY(`idHorario`),
  CONSTRAINT fk_horario_componentes
    FOREIGN KEY (componente_idComponentes)
    REFERENCES fpa_database.componentes (idComponentes)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `fpa_database`.`preferencia`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS preferencia (
  idPreferencia INT NOT NULL AUTO_INCREMENT,
  usuario_idUsuario INT NOT NULL,
  componentes_idComponentes VARCHAR(10) NOT NULL,
  prioridade INT NOT NULL,
  PRIMARY KEY (idPreferencia),
  CONSTRAINT fk_preferencia_usuario
    FOREIGN KEY (usuario_idUsuario)
    REFERENCES fpa_database.usuario (idUsuario)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_preferencia_componentes
    FOREIGN KEY (componentes_idComponentes)
    REFERENCES fpa_database.componentes (idComponentes)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;

-- POPULANDO DATABASE --

-- Insert de CURSOS --

insert into cursos(idCurso, nomeCUrso) value
         ('EM', 'Engrenharia Mecânica'),
         ('ADS', 'Análise e Desenvolvimento de Sistemas'),
         ('TII', 'Técnico Integrado em Informática'),
         ('TIM', 'Técnico Integrado em Mecânica'),
         ('TI', 'Técnico Informática'),
         ('TM', 'Técnico Mecatrônica'),
         ('TSI', 'Tecnólogo para Sistema da Internet'),
         ('LM', 'Licenciatura em Matemática');

-- Insert de USUARIOS
insert into usuario(nome, prontuario, senha, cpf, cargo, tempoCampus, tempoExp, tempoProfissional, tempoInstituicao, nivelCarreira, idade) value('Ricardo','123456','12345','12345','c', 6, 7, 10, 8, 3, 35);
insert into usuario(nome, prontuario, senha, cpf, cargo, tempoCampus, tempoExp, tempoProfissional, tempoInstituicao, nivelCarreira, idade) value('Eduardo Júnior','1990501','12345','12345','p', 5, 6, 7, 4, 6, 20);
insert into usuario(nome, prontuario, senha, cpf, cargo, tempoCampus, tempoExp, tempoProfissional, tempoInstituicao, nivelCarreira, idade) value('Gustavo Vasconselos','3005674','12345','12345','p', 4, 5, 9, 5, 8, 19);
insert into usuario(nome, prontuario, senha, cpf, cargo, tempoCampus, tempoExp, tempoProfissional, tempoInstituicao, nivelCarreira, idade) value('Érica Thalia','30919X','12345','12345','p', 2, 5, 7, 4, 6, 18);
insert into usuario(nome, prontuario, senha, cpf, cargo, tempoCampus, tempoExp, tempoProfissional, tempoInstituicao, nivelCarreira, idade) value('Lucas Donadi','3003159','12345','12345','p', 4, 8, 9, 6, 7, 24);

-- Insert de COMPONENTE
insert into componentes(idComponentes, nomeMateria, cursos_idCurso, periodo, horasSemanais) value('ISO', 'INTRODUÇÃO A SISTEMAS OPERACIONAIS', 'TSI', 'Noite', 4);
insert into componentes(idComponentes, nomeMateria, cursos_idCurso, periodo, horasSemanais) value('ADE', 'ADMINISTRAÇÃO E EMPREENDEDORISMO', 'ADS', 'Manhã  ', 4);
insert into componentes(idComponentes, nomeMateria, cursos_idCurso, periodo, horasSemanais) value('ASE', 'ADMINISTRAÇÃO DE SERVIDORES', 'TI', 'Noite', 4);
insert into componentes(idComponentes, nomeMateria, cursos_idCurso, periodo, horasSemanais) value('PJI', 'PROJETO INTEGRADOR', 'TII', 'Tarde', 4);
insert into componentes(idComponentes, nomeMateria, cursos_idCurso, periodo, horasSemanais) value('RDC', 'REDES DE COMPUTADORES', 'ADS', 'Manhã', 4);
insert into componentes(idComponentes, nomeMateria, cursos_idCurso, periodo, horasSemanais) value('IPW', 'INTRODUÇÃO A PROGRAMAÇÃO WEB', 'TII', 'Tarde', 8);
insert into componentes(idComponentes, nomeMateria, cursos_idCurso, periodo, horasSemanais) value('IMM', 'INTRODUÇÃO A MULTI MÍDIA', 'TI', 'Noite', 4);
insert into componentes(idComponentes, nomeMateria, cursos_idCurso, periodo, horasSemanais) value('IBD', 'INTRODUÇÃO A BANCO DE DADOS', 'TI', 'Noite', 4);
insert into componentes(idComponentes, nomeMateria, cursos_idCurso, periodo, horasSemanais) value('ABD', 'ADMINISTRAÇÃO DE BANCO DE DADOS', 'TI', 'Noite', 4);
insert into componentes(idComponentes, nomeMateria, cursos_idCurso, periodo, horasSemanais) value('EDD', 'ESTRUTURA DE DADOS', 'ADS', 'Manhã', 4);
insert into componentes(idComponentes, nomeMateria, cursos_idCurso, periodo, horasSemanais) value('POB', 'PROGRAMAÇÃO ORIENTADA A OBJETO', 'TSI', 'Noite', 8);

-- Insert de HORÁRIO
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('ISO', 'Quarta-feira', '19:00', '22:35');
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('ADE', 'Segunda-feira', '09:00', '11:35');
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('ASE', 'Quinta-feira', '19:00', '22:35');
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('PJI', 'Terça-feira', '12:35', '14:05');
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('RDC', 'Segunda-feira', '09:00', '11:35');
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('IPW', 'Quarta-feira', '16:20', '18:00');
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('IPW', 'Sexta-feira', '16:20', '18:00');
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('IMM', 'Quarta-feira', '19:00', '22:35');
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('IBD', 'Quinta-feira', '19:00', '22:35');
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('ABD', 'Terça-feira', '19:00', '22:35');
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('EDD', 'Quarta-feira', '09:00', '11:35');
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('POB', 'Quarta-feira', '19:00', '22:35');
insert into horario(componente_idComponentes, diaSemana, horaInicio, horaFim) value('POB', 'Sexta-feira', '19:00', '22:35');